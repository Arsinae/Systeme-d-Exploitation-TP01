import { Schedule } from './schedule';

export class PCASchedule extends Schedule {

  setRunning(current, timeIndex) {
    let waiting = {index: -1, duration: -1};
    for (let i = 0; i < this.processes.length; i++) {
      if (current.processState[i] === 'waiting' &&
      (waiting.index === -1 || this.getProcessDuration(this.processes[i]) < waiting.duration)) {
        waiting = {index: i, duration: this.getProcessDuration(this.processes[i])};
      }
    }
    if (waiting.index !== -1) {
      return {processIndex: waiting.index, end: timeIndex + this.getProcessDuration(this.processes[waiting.index])};
    } else {
      return {processIndex: -1, end: 0};
    }
  }
}
