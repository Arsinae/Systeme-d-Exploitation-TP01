import { Schedule } from './schedule';

export class PAPSSchedule extends Schedule {

  setRunning(current, timeIndex) {
    let waiting = {index: -1, arrived: -1};
    for (let i = 0; i < this.processes.length; i++) {
      if (current.processState[i] === 'waiting' &&
      (waiting.index === -1 || this.processes[i].arrivedTime < waiting.arrived)) {
        waiting = {index: i, arrived: this.processes[i].arrivedTime};
      }
    }
    if (waiting.index !== -1) {
      return {processIndex: waiting.index, end: timeIndex + this.getProcessDuration(this.processes[waiting.index])};
    } else {
      return {processIndex: -1, end: 0};
    }
  }
}
